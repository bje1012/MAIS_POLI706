---
title: "**POLI706: Advanced Methods of Political Analysis**"
subtitle: |
          | 
          | Problem set 3
          |
documentclass: article
format: 
  pdf:
    citation_package: natbib
    keep_tex: true
    fig_caption: true
    latex_engine: xelatex
    code-block-bg: light
    code-block-border-left: "#31BAE9"
    linkcolor: highlight
    urlcolor: highlight
    highlight-style: atom-one
#bibliography: W2.bib
header-includes:
  -  \usepackage{hyperref}
  -  \usepackage{mathpazo}
  -  \usepackage{bookmark}
  -  \definecolor{light}{HTML}{EEEEEE}
  -  \definecolor{highlight}{HTML}{9A2A2A}
  -  \definecolor{dark}{HTML}{330033}
  -  \usepackage{setspace}\singlespacing
  -  \usepackage{fvextra}
  -  \setmainfont[ItalicFont = {TeXGyrePagella-Italic}]{TeX Gyre Pagella}
  -  \DefineVerbatimEnvironment{Highlighting}{Verbatim}{breaklines,commandchars=\\\{\}}
  #-  \setmonofont{Fira Code}[Contextuals=Alternate]
  -  \makeatletter
  -  \renewcommand*\verbatim@nolig@list{}
  -  \makeatother
# You have to install fira font and tex gyre pagella
biblio-style: apsr
geometry: margin=1in
#fontfamily: mathpazo
fontsize: 11pt
link-citation: true
indent: true
---

```{r}
#| include: false
knitr::opts_chunk$set(echo = TRUE, eval = FALSE, error = FALSE, 
                      message = FALSE, warning = FALSE)
# Load packages to import data
library(knitr);library(patchwork);library(tidyverse)
vdemdata::vdem -> vdem
data1 <- vdem |> dplyr::filter(year == 2015) |> dplyr::select(1:10, v2x_polyarchy, e_gdppc)
data2 <- vdem |> dplyr::filter(COWcode == 2) |> dplyr::select(1:10, v2x_polyarchy, e_gdppc)
data3 <- vdem |> dplyr::filter(COWcode == 2 & year > 1999 & year < 2016) |> 
  dplyr::select(1:10, v2x_polyarchy, e_gdppc)
save(data1, data2, data3, file = "data_assignment3.rdata")
```


## Exercise 1

Load `data_assignment3.rdata` into your RStudio. Explain whether the following data sets are cross-sectional, time-series, pooled cross-sectional, or panel data. Using `glimpse()` or `str()` to explore the data sets.

a. `data1`

b. `data2`

c. `data3`

## Exercise 2

Compare and contrast observational studies and randomized experiments. Discuss the strengths and weaknesses of each in terms of causal inference. Recap the second and third weeks.

## Exercise 3

```{r}
set.seed(1224)  # Set seed for reproducibility

# Simulating observational data (non-random)
n <- 100  # Number of participants
income <- rnorm(n, mean = 50000, sd = 10000)  # Generating random income
age <- rnorm(n, mean = 40, sd = 10)  # Generating random age
group <- ifelse(income > 50000, 1, 0)  # Assign group based on income (observational)

# Outcome depends on both group and income
outcome <- 5 + 0.3 * income + 2 * group + rnorm(n)

# Creating the data frame
obs_data <- data.frame(group, income, age, outcome)

# Simulating randomized data (random assignment)
group_random <- sample(0:1, n, replace = TRUE)  # Randomly assigning to two groups

# Outcome still depends on income and group, but group is randomized
outcome_random <- 5 + 0.3 * income + 2 * group_random + rnorm(n)

# Creating the randomized data frame
rand_data <- data.frame(group_random, income, age, outcome_random)
```

a. Run a linear regression model with `group` and `income` on `outcome` for the observational data, and with `group_random` and `income` on `outcome_random` for the randomized data, respectively.

b. Compare how well the group variable predicts the outcome in both datasets and explain what are the differences between two linear regression models using `obs_data` and `rand_data`. 

c. Visualize the differences between observational and randomized data using boxplots.






